<!DOCTYPE html>
<html>
<head>
    <title>AlFaravi Chat App</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .login-card { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; width: 350px; }
        .google-btn { background: #4285F4; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; width: 100%; transition: 0.3s; }
        .google-btn:hover { background: #357ae8; }
        #chat-interface { display: none; width: 100vw; height: 100vh; }
    </style>
</head>
<body>

    <div id="login-ui" class="login-card">
        <h2>Welcome to AlFaravi</h2>
        <p>Please login to continue</p>
        <button class="google-btn" onclick="loginWithGoogle()">Login with Google</button>
    </div>

    <div id="chat-interface"></div>

    <script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>
    
    <script>
        // ১. আপনার Firebase Config এখানে দিন
        const firebaseConfig = {
            apiKey: "AIzaSyDNPPk6UXdC-zqXCFPk8qGm92WFs9DFWC0",
            authDomain: "alfaravichatapp.firebaseapp.com",
            projectId: "alfaravichatapp",
            storageBucket: "alfaravichatapp.firebasestorage.app",
            messagingSenderId: "26540560340",
            appId: "1:26540560340:web:44bb8b85590d36524c9041"
        };
        firebase.initializeApp(firebaseConfig);

        // ২. Google লগইন ফাংশন
        function loginWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider).then((result) => {
                const user = result.user;
                document.getElementById('login-ui').style.display = 'none';
                document.getElementById('chat-interface').style.display = 'block';
                startZego(user.displayName, user.uid);
            }).catch((error) => console.log(error));
        }

        // ৩. ZegoCloud সেটআপ
        function startZego(userName, userID) {
            const appID = 1132782578; 
            const serverSecret = "953af0a3cade62aebfc3e9ffe56b0c20";
            const roomID = "alfaravi_main_room"; // আপনার জন্য ফিক্সড রুম

            const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(appID, serverSecret, roomID, userID, userName);
            const zp = ZegoUIKitPrebuilt.create(kitToken);

            zp.joinRoom({
                container: document.querySelector("#chat-interface"),
                scenario: { mode: ZegoUIKitPrebuilt.VideoConference },
                showScreenSharingButton: true,
            });
        }
    </script>
</body>
</html>